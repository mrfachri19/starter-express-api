const midtransClient = require("midtrans-client");
require("dotenv").config();

// eslint-disable-next-line no-console
console.log({
  isProduction: process.env.MIDT_IS_PRODUCTION === "true",
  serverKey: process.env.MIDTRANS_SERVER_KEY,
  clientKey: process.env.MIDTRANS_CLIENT_KEY
});
const snap = new midtransClient.Snap({
  isProduction: process.env.MIDT_IS_PRODUCTION === "true",
  serverKey: process.env.MIDTRANS_SERVER_KEY,
  clientKey: process.env.MIDTRANS_CLIENT_KEY
});
module.exports = {
  post: (id, amount) => new Promise((resolve, reject) => {
    const parameter = {
      transaction_details: {
        order_id: id,
        gross_amount: amount
      },
      credit_card: {
        secure: true
      }
    };
    snap.createTransaction(parameter).then(result => {
      resolve(result.redirect_url);
    }).catch(err => {
      reject(err);
    });
  }),
  notif: body => new Promise((resolve, reject) => {
    snap.transaction.notification(body).then(result => {
      resolve(result);
    }).catch(err => {
      reject(err);
    });
  })
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtaWR0cmFuc0NsaWVudCIsInJlcXVpcmUiLCJjb25maWciLCJjb25zb2xlIiwibG9nIiwiaXNQcm9kdWN0aW9uIiwicHJvY2VzcyIsImVudiIsIk1JRFRfSVNfUFJPRFVDVElPTiIsInNlcnZlcktleSIsIk1JRFRSQU5TX1NFUlZFUl9LRVkiLCJjbGllbnRLZXkiLCJNSURUUkFOU19DTElFTlRfS0VZIiwic25hcCIsIlNuYXAiLCJtb2R1bGUiLCJleHBvcnRzIiwicG9zdCIsImlkIiwiYW1vdW50IiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJwYXJhbWV0ZXIiLCJ0cmFuc2FjdGlvbl9kZXRhaWxzIiwib3JkZXJfaWQiLCJncm9zc19hbW91bnQiLCJjcmVkaXRfY2FyZCIsInNlY3VyZSIsImNyZWF0ZVRyYW5zYWN0aW9uIiwidGhlbiIsInJlc3VsdCIsInJlZGlyZWN0X3VybCIsImNhdGNoIiwiZXJyIiwibm90aWYiLCJib2R5IiwidHJhbnNhY3Rpb24iLCJub3RpZmljYXRpb24iXSwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvaGVscGVyL21pZHRyYW5zL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IG1pZHRyYW5zQ2xpZW50ID0gcmVxdWlyZShcIm1pZHRyYW5zLWNsaWVudFwiKTtcclxucmVxdWlyZShcImRvdGVudlwiKS5jb25maWcoKTtcclxuXHJcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXHJcbmNvbnNvbGUubG9nKHtcclxuICBpc1Byb2R1Y3Rpb246IHByb2Nlc3MuZW52Lk1JRFRfSVNfUFJPRFVDVElPTiA9PT0gXCJ0cnVlXCIsXHJcbiAgc2VydmVyS2V5OiBwcm9jZXNzLmVudi5NSURUUkFOU19TRVJWRVJfS0VZLFxyXG4gIGNsaWVudEtleTogcHJvY2Vzcy5lbnYuTUlEVFJBTlNfQ0xJRU5UX0tFWSxcclxufSk7XHJcblxyXG5jb25zdCBzbmFwID0gbmV3IG1pZHRyYW5zQ2xpZW50LlNuYXAoe1xyXG4gIGlzUHJvZHVjdGlvbjogcHJvY2Vzcy5lbnYuTUlEVF9JU19QUk9EVUNUSU9OID09PSBcInRydWVcIixcclxuICBzZXJ2ZXJLZXk6IHByb2Nlc3MuZW52Lk1JRFRSQU5TX1NFUlZFUl9LRVksXHJcbiAgY2xpZW50S2V5OiBwcm9jZXNzLmVudi5NSURUUkFOU19DTElFTlRfS0VZLFxyXG59KTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0ge1xyXG4gIHBvc3Q6IChpZCwgYW1vdW50KSA9PlxyXG4gICAgbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICBjb25zdCBwYXJhbWV0ZXIgPSB7XHJcbiAgICAgICAgdHJhbnNhY3Rpb25fZGV0YWlsczoge1xyXG4gICAgICAgICAgb3JkZXJfaWQ6IGlkLFxyXG4gICAgICAgICAgZ3Jvc3NfYW1vdW50OiBhbW91bnQsXHJcbiAgICAgICAgfSxcclxuICAgICAgICBjcmVkaXRfY2FyZDoge1xyXG4gICAgICAgICAgc2VjdXJlOiB0cnVlLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH07XHJcblxyXG4gICAgICBzbmFwXHJcbiAgICAgICAgLmNyZWF0ZVRyYW5zYWN0aW9uKHBhcmFtZXRlcilcclxuICAgICAgICAudGhlbigocmVzdWx0KSA9PiB7XHJcbiAgICAgICAgICByZXNvbHZlKHJlc3VsdC5yZWRpcmVjdF91cmwpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICAgIHJlamVjdChlcnIpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSksXHJcblxyXG4gIG5vdGlmOiAoYm9keSkgPT5cclxuICAgIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgc25hcC50cmFuc2FjdGlvblxyXG4gICAgICAgIC5ub3RpZmljYXRpb24oYm9keSlcclxuICAgICAgICAudGhlbigocmVzdWx0KSA9PiB7XHJcbiAgICAgICAgICByZXNvbHZlKHJlc3VsdCk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgICAgcmVqZWN0KGVycik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KSxcclxufTtcclxuIl0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNQSxjQUFjLEdBQUdDLE9BQU8sQ0FBQyxpQkFBaUIsQ0FBQztBQUNqREEsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDQyxNQUFNLEVBQUU7O0FBRTFCO0FBQ0FDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDO0VBQ1ZDLFlBQVksRUFBRUMsT0FBTyxDQUFDQyxHQUFHLENBQUNDLGtCQUFrQixLQUFLLE1BQU07RUFDdkRDLFNBQVMsRUFBRUgsT0FBTyxDQUFDQyxHQUFHLENBQUNHLG1CQUFtQjtFQUMxQ0MsU0FBUyxFQUFFTCxPQUFPLENBQUNDLEdBQUcsQ0FBQ0s7QUFDekIsQ0FBQyxDQUFDO0FBRUYsTUFBTUMsSUFBSSxHQUFHLElBQUliLGNBQWMsQ0FBQ2MsSUFBSSxDQUFDO0VBQ25DVCxZQUFZLEVBQUVDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDQyxrQkFBa0IsS0FBSyxNQUFNO0VBQ3ZEQyxTQUFTLEVBQUVILE9BQU8sQ0FBQ0MsR0FBRyxDQUFDRyxtQkFBbUI7RUFDMUNDLFNBQVMsRUFBRUwsT0FBTyxDQUFDQyxHQUFHLENBQUNLO0FBQ3pCLENBQUMsQ0FBQztBQUVGRyxNQUFNLENBQUNDLE9BQU8sR0FBRztFQUNmQyxJQUFJLEVBQUUsQ0FBQ0MsRUFBRSxFQUFFQyxNQUFNLEtBQ2YsSUFBSUMsT0FBTyxDQUFDLENBQUNDLE9BQU8sRUFBRUMsTUFBTSxLQUFLO0lBQy9CLE1BQU1DLFNBQVMsR0FBRztNQUNoQkMsbUJBQW1CLEVBQUU7UUFDbkJDLFFBQVEsRUFBRVAsRUFBRTtRQUNaUSxZQUFZLEVBQUVQO01BQ2hCLENBQUM7TUFDRFEsV0FBVyxFQUFFO1FBQ1hDLE1BQU0sRUFBRTtNQUNWO0lBQ0YsQ0FBQztJQUVEZixJQUFJLENBQ0RnQixpQkFBaUIsQ0FBQ04sU0FBUyxDQUFDLENBQzVCTyxJQUFJLENBQUVDLE1BQU0sSUFBSztNQUNoQlYsT0FBTyxDQUFDVSxNQUFNLENBQUNDLFlBQVksQ0FBQztJQUM5QixDQUFDLENBQUMsQ0FDREMsS0FBSyxDQUFFQyxHQUFHLElBQUs7TUFDZFosTUFBTSxDQUFDWSxHQUFHLENBQUM7SUFDYixDQUFDLENBQUM7RUFDTixDQUFDLENBQUM7RUFFSkMsS0FBSyxFQUFHQyxJQUFJLElBQ1YsSUFBSWhCLE9BQU8sQ0FBQyxDQUFDQyxPQUFPLEVBQUVDLE1BQU0sS0FBSztJQUMvQlQsSUFBSSxDQUFDd0IsV0FBVyxDQUNiQyxZQUFZLENBQUNGLElBQUksQ0FBQyxDQUNsQk4sSUFBSSxDQUFFQyxNQUFNLElBQUs7TUFDaEJWLE9BQU8sQ0FBQ1UsTUFBTSxDQUFDO0lBQ2pCLENBQUMsQ0FBQyxDQUNERSxLQUFLLENBQUVDLEdBQUcsSUFBSztNQUNkWixNQUFNLENBQUNZLEdBQUcsQ0FBQztJQUNiLENBQUMsQ0FBQztFQUNOLENBQUM7QUFDTCxDQUFDIn0=