const connection = require("../../config/mysql");
module.exports = {
  register: data => new Promise((resolve, reject) => {
    connection.query("INSERT INTO user_management SET ?", data, (error, result) => {
      if (!error) {
        const newResult = {
          id: result.insertId,
          ...data
        };
        delete newResult.password;
        resolve(newResult);
      } else {
        reject(new Error(`SQL : ${error.sqlMessage}`));
      }
    });
  }),
  getUserByEmail: email => new Promise((resolve, reject) => {
    connection.query("SELECT * FROM user_management WHERE email = ?", email, (error, result) => {
      if (!error) {
        resolve(result);
      } else {
        reject(new Error(`SQL: ${error.sqlMessage}`));
      }
    });
  })
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb25uZWN0aW9uIiwicmVxdWlyZSIsIm1vZHVsZSIsImV4cG9ydHMiLCJyZWdpc3RlciIsImRhdGEiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsInF1ZXJ5IiwiZXJyb3IiLCJyZXN1bHQiLCJuZXdSZXN1bHQiLCJpZCIsImluc2VydElkIiwicGFzc3dvcmQiLCJFcnJvciIsInNxbE1lc3NhZ2UiLCJnZXRVc2VyQnlFbWFpbCIsImVtYWlsIl0sInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL21vZHVsZXMvYXV0aC9hdXRoTW9kZWwuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgY29ubmVjdGlvbiA9IHJlcXVpcmUoXCIuLi8uLi9jb25maWcvbXlzcWxcIik7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHtcclxuICByZWdpc3RlcjogKGRhdGEpID0+XHJcbiAgICBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgIGNvbm5lY3Rpb24ucXVlcnkoXCJJTlNFUlQgSU5UTyB1c2VyX21hbmFnZW1lbnQgU0VUID9cIiwgZGF0YSwgKGVycm9yLCByZXN1bHQpID0+IHtcclxuICAgICAgICBpZiAoIWVycm9yKSB7XHJcbiAgICAgICAgICBjb25zdCBuZXdSZXN1bHQgPSB7XHJcbiAgICAgICAgICAgIGlkOiByZXN1bHQuaW5zZXJ0SWQsXHJcbiAgICAgICAgICAgIC4uLmRhdGEsXHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgICAgZGVsZXRlIG5ld1Jlc3VsdC5wYXNzd29yZDtcclxuICAgICAgICAgIHJlc29sdmUobmV3UmVzdWx0KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihgU1FMIDogJHtlcnJvci5zcWxNZXNzYWdlfWApKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfSksXHJcbiAgZ2V0VXNlckJ5RW1haWw6IChlbWFpbCkgPT5cclxuICAgIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgY29ubmVjdGlvbi5xdWVyeShcclxuICAgICAgICBcIlNFTEVDVCAqIEZST00gdXNlcl9tYW5hZ2VtZW50IFdIRVJFIGVtYWlsID0gP1wiLFxyXG4gICAgICAgIGVtYWlsLFxyXG4gICAgICAgIChlcnJvciwgcmVzdWx0KSA9PiB7XHJcbiAgICAgICAgICBpZiAoIWVycm9yKSB7XHJcbiAgICAgICAgICAgIHJlc29sdmUocmVzdWx0KTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoYFNRTDogJHtlcnJvci5zcWxNZXNzYWdlfWApKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICk7XHJcbiAgICB9KSxcclxuXHJcblxyXG59OyJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTUEsVUFBVSxHQUFHQyxPQUFPLENBQUMsb0JBQW9CLENBQUM7QUFFaERDLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHO0VBQ2ZDLFFBQVEsRUFBR0MsSUFBSSxJQUNiLElBQUlDLE9BQU8sQ0FBQyxDQUFDQyxPQUFPLEVBQUVDLE1BQU0sS0FBSztJQUMvQlIsVUFBVSxDQUFDUyxLQUFLLENBQUMsbUNBQW1DLEVBQUVKLElBQUksRUFBRSxDQUFDSyxLQUFLLEVBQUVDLE1BQU0sS0FBSztNQUM3RSxJQUFJLENBQUNELEtBQUssRUFBRTtRQUNWLE1BQU1FLFNBQVMsR0FBRztVQUNoQkMsRUFBRSxFQUFFRixNQUFNLENBQUNHLFFBQVE7VUFDbkIsR0FBR1Q7UUFDTCxDQUFDO1FBQ0QsT0FBT08sU0FBUyxDQUFDRyxRQUFRO1FBQ3pCUixPQUFPLENBQUNLLFNBQVMsQ0FBQztNQUNwQixDQUFDLE1BQU07UUFDTEosTUFBTSxDQUFDLElBQUlRLEtBQUssQ0FBRSxTQUFRTixLQUFLLENBQUNPLFVBQVcsRUFBQyxDQUFDLENBQUM7TUFDaEQ7SUFDRixDQUFDLENBQUM7RUFDSixDQUFDLENBQUM7RUFDSkMsY0FBYyxFQUFHQyxLQUFLLElBQ3BCLElBQUliLE9BQU8sQ0FBQyxDQUFDQyxPQUFPLEVBQUVDLE1BQU0sS0FBSztJQUMvQlIsVUFBVSxDQUFDUyxLQUFLLENBQ2QsK0NBQStDLEVBQy9DVSxLQUFLLEVBQ0wsQ0FBQ1QsS0FBSyxFQUFFQyxNQUFNLEtBQUs7TUFDakIsSUFBSSxDQUFDRCxLQUFLLEVBQUU7UUFDVkgsT0FBTyxDQUFDSSxNQUFNLENBQUM7TUFDakIsQ0FBQyxNQUFNO1FBQ0xILE1BQU0sQ0FBQyxJQUFJUSxLQUFLLENBQUUsUUFBT04sS0FBSyxDQUFDTyxVQUFXLEVBQUMsQ0FBQyxDQUFDO01BQy9DO0lBQ0YsQ0FBQyxDQUNGO0VBQ0gsQ0FBQztBQUdMLENBQUMifQ==